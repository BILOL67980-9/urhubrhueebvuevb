# Объекты

https://avatars.mds.yandex.net/i?id=0295078a33f5e9d48cdbcde4a6c73b26f19f6565-5364030-images-thumbs&n=13

+ **Как мы знаем из главы Типы данных, в JavaScript существует 8 типов данных. Семь из них называются «примитивными», так как содержат только одно значение (будь то строка, число или что-то другое)**.

+ **Объекты же используются для хранения коллекций различных значений и более сложных сущностей. В JavaScript объекты используются очень часто, это одна из основ языка. Поэтому мы должны понять их, прежде чем углубляться куда-либо ещё.**

+ **Объект может быть создан с помощью фигурных скобок {…} с необязательным списком свойств. Свойство – это пара «ключ: значение», где ключ – это строка (также называемая «именем свойства»), а значение может быть чем угодно.**

+ **Мы можем представить объект в виде ящика с подписанными папками. Каждый элемент данных хранится в своей папке, на которой написан ключ. По ключу папку легко найти, удалить или добавить в неё что-либо.**

## Пустой объект («пустой ящик») можно создать, используя один из двух вариантов синтаксиса:

```java
let user = new Object(); // синтаксис "конструктор объекта"
let user = {};  // синтаксис "литерал объекта"
```

**Обычно используют вариант с фигурными скобками {...}. Такое объявление называют литералом объекта или литеральной нотацией.**

## Литералы и свойства

**При использовании литерального синтаксиса {...} мы сразу можем поместить в объект несколько свойств в виде пар «ключ: значение»:**

```java
let user = {     // объект
  name: "John",  // под ключом "name" хранится значение "John"
  age: 30        // под ключом "age" хранится значение 30
};
```

***У каждого свойства есть ключ (также называемый «имя» или «идентификатор»). После имени свойства следует двоеточие ":", и затем указывается значение свойства. Если в объекте несколько свойств, то они перечисляются через запятую.**

***В объекте user сейчас находятся два свойства:***

Первое свойство с именем ```"name"``` и значением "John".
Второе свойство с именем ```"age"``` и значением 30.
Можно сказать, что наш объект user – это ящик с двумя папками, подписанными «name» и ```«age».```

***Мы можем в любой момент добавить в него новые папки, удалить папки или прочитать содержимое любой папки.***

***Для обращения к свойствам используется запись «через точку»:***
```java
// получаем свойства объекта:

alert( user.name ); // John

alert( user.age ); // 30
```
Значение может быть любого типа. Давайте добавим свойство с логическим значением:

```java 
user.isAdmin = true; 
```

**Это называется «висячая запятая». Такой подход упрощает добавление, удаление и перемещение свойств, так как все строки объекта становятся одинаковыми.**

**Объект, объявленный как константа, может быть изменён
Объект, объявленный через const, может быть изменён.**

***Например:***
```java
const user = {
  name: "John"
};

user.name = "Pete"; // (*)

alert(user.name); // Pete
```
>Может показаться, что строка (*) должна вызвать ошибку, но нет, здесь всё в порядке. Дело в том, что объявление const защищает от изменений только саму переменную user, а не её содержимое.

**Определение const выдаст ошибку только если мы присвоим переменной другое значение: ```user=....```**

Есть ещё один способ сделать константами свойства объекта, который мы рассмотрим в главе Флаги и дескрипторы свойств.

Квадратные скобки
Для свойств, имена которых состоят из нескольких слов, доступ к значению «через точку» не работает:

> ***// это вызовет синтаксическую ошибку
``user.likes birds = true``
JavaScript видит, что мы обращаемся к свойству user.likes, а затем идёт непонятное слово birds. В итоге синтаксическая ошибка.***

Точка требует, чтобы ключ был именован по правилам именования переменных. То есть не имел пробелов, не начинался с цифры и не содержал специальные символы, кроме $ и _.

Для таких случаев существует альтернативный способ доступа к свойствам через квадратные скобки. Такой способ сработает с любым именем свойства:
```java
let user = {};

// присваивание значения свойству
user["likes birds"] = true;

// получение значения свойства
alert(user["likes birds"]); // true

// удаление свойства
delete user["likes birds"];
```
**Сейчас всё в порядке. Обратите внимание, что строка в квадратных скобках заключена в кавычки (подойдёт любой тип кавычек).**

Квадратные скобки также позволяют обратиться к свойству, имя которого может быть результатом выражения. Например, имя свойства может храниться в переменной:

``let key = "likes birds";``

```// то же самое, что и user["likes birds"] = true;
user[key] = true;
```
> **Здесь переменная key может быть вычислена во время выполнения кода или зависеть от пользовательского ввода. После этого мы используем её для доступа к свойству. Это даёт нам большую гибкость.**

Пример:
```java
let user = {
  name: "John",
  age: 30
};

let key = prompt("Что вы хотите узнать о пользователе?", "name");
```
***// доступ к свойству через переменную
```alert( user[key] ); // John (если ввели "name")```
Запись «через точку» такого не позволяет:***
```java
let user = {
  name: "John",
  age: 30
};

let key = "name";
alert( user.key ); // undefined
```
***Вычисляемые свойства
Мы можем использовать квадратные скобки в литеральной нотации для создания вычисляемого свойства.***

***Пример:***
```java
let fruit = prompt("Какой фрукт купить?", "apple");

let bag = {
  [fruit]: 5, // имя свойства будет взято из переменной fruit
};

alert( bag.apple ); // 5, если fruit="apple"
````
**Смысл вычисляемого свойства прост: запись ``[fruit]`` означает, что имя свойства необходимо взять из переменной fruit.**

**И если посетитель введёт слово "apple", то в объекте bag теперь будет лежать свойство **``{apple: 5}.``

**По сути, пример выше работает так же, как и следующий пример:**
```
let fruit = prompt("Какой фрукт купить?", "apple");
let bag = {};
```
```// имя свойства будет взято из переменной fruit

bag[fruit] = 5;```
***…Но первый пример выглядит лаконичнее.***

***Мы можем использовать и более сложные выражения в квадратных скобках:***
```java
let fruit = 'apple';
let bag = {
  [fruit + 'Computers']: 5 // bag.appleComputers = 5
};
```
Квадратные скобки дают намного больше возможностей, чем запись через точку. Они позволяют использовать любые имена свойств и переменные, хотя и требуют более громоздких конструкций кода.

Подведём итог: в большинстве случаев, когда имена свойств известны и просты, используется запись через точку. Если же нам нужно что-то более сложное, то мы используем квадратные скобки.

*Свойство из переменной
В реальном коде часто нам необходимо использовать существующие переменные как значения для свойств с тем же именем.*

**Например:**
```java
function makeUser(name, age) {
  return {
    name: name,
    age: age
    // ...другие свойства
  };
}

let user = makeUser("John", 30);
alert(user.name); // John
```
В примере выше название свойств name и age совпадают с названиями переменных, которые мы подставляем в качестве значений этих свойств. Такой подход настолько распространён, что существуют специальные короткие свойства для упрощения этой записи.

*Вместо name:name мы можем написать просто name:*
```java
function makeUser(name, age) {
  return {
    name, // то же самое, что и name: name
    age   // то же самое, что и age: age
    // ...
  };
}
```
Мы можем использовать как обычные свойства, так и короткие в одном и том же объекте:
```java
let user = {
  name,  // тоже самое, что и name:name
  age: 30
};
```
***Ограничения на имена свойств
Как мы уже знаем, имя переменной не может совпадать с зарезервированными словами, такими как «for», «let», «return» и т.д.***

***Но для свойств объекта такого ограничения нет:***
```java
// эти имена свойств допустимы
let obj = {
  for: 1,
  let: 2,
  return: 3
};

alert( obj.for + obj.let + obj.return );  // 6
```
***Иными словами, нет никаких ограничений к именам свойств. Они могут быть в виде строк или символов (специальный тип для идентификаторов, который будет рассмотрен позже).***

***Все другие типы данных будут автоматически преобразованы к строке.***

***Например, если использовать число 0 в качестве ключа, то оно превратится в строку "0":***
